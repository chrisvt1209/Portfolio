{
  "version": 3,
  "sources": ["../../../assets/js/helpers/currency.js"],
  "sourcesContent": ["\uFEFFimport { get } from \"./http.js\";\r\nimport { format } from \"date-fns\";\r\n\r\n/**\r\n * Fetches and caches currency icons from the server.\r\n *\r\n * The function is immediately invoked and returns an async function that,\r\n * on first call, fetches icon data from `/api/CurrencyApi/GetCurrencyIcons`\r\n * and caches it for subsequent calls.\r\n *\r\n * @function getCurrencyIcons\r\n * @async\r\n * @returns {Promise<Object.<string, string>>} A mapping of currency codes to icon names.\r\n *\r\n * @example\r\n * const icons = await getCurrencyIcons();\r\n * console.log(icons[\"USD\"]); // e.g. \"currency-dollar\"\r\n */\r\nexport const getCurrencyIcons = function () {\r\n    let data;\r\n    return async () => {\r\n        if (data)\r\n            return data;\r\n        const response = await get(\"/api/CurrencyApi/GetCurrencyIcons\");\r\n        data = response.json();\r\n        return data;\r\n    };\r\n}();\r\n\r\n/**\r\n * Updates the icon(s) inside a DOM element to match the given currency code.\r\n *\r\n * It replaces any existing currency-related classes with the appropriate one\r\n * from the currency icons set. Elements that should update must have the\r\n * `.currency-replace-target` class.\r\n *\r\n * @async\r\n * @param {HTMLElement} element - The parent DOM element containing targets to update.\r\n * @param {string} currencyCode - The ISO 4217 currency code (e.g. `\"USD\"`, `\"EUR\"`).\r\n * @returns {Promise<void>}\r\n *\r\n * @example\r\n * await setCurrencyIcons(document.getElementById(\"price\"), \"USD\");\r\n */\r\nexport const setCurrencyIcons = async (element, currencyCode) => {\r\n    const currencyIcons = await getCurrencyIcons();\r\n    const currencyIcon = currencyIcons[currencyCode] ?? \"currency-euro\";\r\n    const currencyIconClassName = `bi-${currencyIcon}`;\r\n    const otherCurrencyIconClassNames = Object.keys(currencyIcons).map(icon => `bi-${icon}`);\r\n\r\n    const currencyReplaceTargets = element.querySelectorAll(\".currency-replace-target\");\r\n    currencyReplaceTargets.forEach(target => {\r\n        target.classList.remove(...otherCurrencyIconClassNames);\r\n        target.classList.add(currencyIconClassName);\r\n    });\r\n};\r\n\r\n/**\r\n * Retrieves the icon class name for a given currency code.\r\n *\r\n * Falls back to `\"currency-euro\"` if the code is not found.\r\n *\r\n * @async\r\n * @param {string} currencyCode - The ISO 4217 currency code.\r\n * @returns {Promise<string>} The currency icon name (without the `bi-` prefix).\r\n *\r\n * @example\r\n * const icon = await getCurrencyIcon(\"JPY\");\r\n * // \"currency-yen\"\r\n */\r\nexport const getCurrencyIcon = async (currencyCode) => {\r\n    const currencyIcons = await getCurrencyIcons();\r\n    return currencyIcons[currencyCode] ?? \"currency-euro\";\r\n};\r\n\r\n/**\r\n * Formats a numeric value as a localized currency string.\r\n *\r\n * Uses the `toLocaleString` method with the current language (`CURRENT_LANG`)\r\n * and the given currency code.\r\n *\r\n * @param {number} value - The numeric value to format.\r\n * @param {string} currCode - The ISO 4217 currency code (e.g. `\"USD\"`, `\"EUR\"`).\r\n * @returns {string} The formatted currency string.\r\n *\r\n * @example\r\n * formatCurrency(1234.56, \"USD\");\r\n * // \"$1,234.56\" (in en-US locale)\r\n */\r\nexport const formatCurrency = (value, currCode) => {\r\n    return value.toLocaleString(CURRENT_LANG, {\r\n        style: \"currency\",\r\n        currency: currCode,\r\n    });\r\n};\r\n"],
  "mappings": "wFAkBO,IAAMA,GAAmB,UAAY,CACxC,IAAIC,EACJ,MAAO,UACCA,IAGJA,GADiB,MAAMC,EAAI,mCAAmC,GAC9C,KAAK,EACdD,EAEf,GAAE,EAiBWE,EAAmBC,EAAA,MAAOC,EAASC,IAAiB,CAC7D,IAAMC,EAAgB,MAAMP,EAAiB,EAEvCQ,EAAwB,MADTD,EAAcD,CAAY,GAAK,eACJ,GAC1CG,EAA8B,OAAO,KAAKF,CAAa,EAAE,IAAIG,GAAQ,MAAMA,CAAI,EAAE,EAExDL,EAAQ,iBAAiB,0BAA0B,EAC3D,QAAQM,GAAU,CACrCA,EAAO,UAAU,OAAO,GAAGF,CAA2B,EACtDE,EAAO,UAAU,IAAIH,CAAqB,CAC9C,CAAC,CACL,EAXgC,oBA0BnBI,EAAkBR,EAAA,MAAOE,IACZ,MAAMN,EAAiB,GACxBM,CAAY,GAAK,gBAFX,mBAmBlBO,EAAiBT,EAAA,CAACU,EAAOC,IAC3BD,EAAM,eAAe,aAAc,CACtC,MAAO,WACP,SAAUC,CACd,CAAC,EAJyB",
  "names": ["getCurrencyIcons", "data", "get", "setCurrencyIcons", "__name", "element", "currencyCode", "currencyIcons", "currencyIconClassName", "otherCurrencyIconClassNames", "icon", "target", "getCurrencyIcon", "formatCurrency", "value", "currCode"]
}
